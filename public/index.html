<!DOCTYPE html>
<html lang="en" dir="ltr" ng-app="MyApp">
    <head>
        <meta charset="utf-8">
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.8/angular.min.js" charset="utf-8"></script>
        <script src="app.js" charset="utf-8"></script>
        <link rel="stylesheet" href="main.css">
        <title></title>
    </head>
    <body ng-controller="AuthController as auth">
        <nav>
            <!-- LOGIN -->
            <h3 ng-click="login={'display':'block'}">LOGIN</h3>
            <!-- login modal -->
            <div id="loginModal" class="modal" ng-style="login">
                <form ng-submit="auth.logIn()">
                    <input type="text" ng-model="auth.username" placeholder="username">
                    <input type="password" ng-model="auth.password" placeholder="password">
                    <input type="submit" value="Log In">
                </form>
                <button ng-click="login={}">X</button>
            </div>
            <!-- LOGOUT -->
            <form ng-submit="auth.logOut()">
                <input type="submit" value="Log Out">
            </form>
            <!-- CREATE USER -->
            <form ng-submit="auth.createUser()">
                <input type="text" ng-model="auth.username" placeholder="username">
                <input type="text" ng-model="auth.password" placeholder="password">
                <!-- <input type="text" ng-model="auth.confirmPassword" placeholder="confirm password"> -->
                <input type="submit" value="Create User"/>
            </form>
        </nav>
        <h1>Trusty Townies</h1>

    	<div ng-if="auth.loggedInUsername">
  			<form ng-submit="auth.createTownie()">
  				<input type="text" ng-model="auth.name" placeholder="Company Name"/>
				<input type="text" ng-model="auth.city" placeholder="City"/>
				<input type="text" ng-model="auth.state" placeholder="State"/>
				<input type="text" ng-model="auth.description" placeholder="description"/>
				<input type="submit" value="Create New Townie"/>
  			</form>
      <div>
			<label for="Search By">
            <input type='text' placeholder='Search Company Name' ng-model='searchBox'>
            <input type='text' placeholder='Search By City' ng-model='searchBox'>
            <input type='text' placeholder='Search By State' ng-model='searchBox'>
      </label>
        <ul>
          <li ng-repeat="companies in auth.companies| filter: searchBox">{{companies.name}} :<span> {{companies.city}} :<span> {{companies.state}}</li>

        </ul>
      </div>
    </body>
</html>
