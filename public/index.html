<!DOCTYPE html>
<html lang="en" dir="ltr" ng-app="MyApp">
    <head>
        <meta charset="utf-8">
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.8/angular.min.js" charset="utf-8"></script>
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Luckiest+Guy&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet">
		<script src="app.js" charset="utf-8"></script>
		<link rel="stylesheet" href="/css/normalize.css">
		<link rel="stylesheet" href="/css/skeleton.css">
		<link rel="stylesheet" href="/css/main.css">
		<title>Trusty Townies</title>
    </head>
    <body>
		<div class="container" ng-controller="AppController as ctrl">
			<nav>
        		<div ng-hide="ctrl.loggedInUsername">
	            <!-- LOGIN -->
	            	<h3 ng-click="login={'display':'block'}" class="actions">LOGIN</h3>
	            <!-- login modal -->
					<div id="loginModal" class="modal" ng-style="login">
	                    <div class="modal-content">
							<div class="modal-body">
                                <h3>LOGIN</h3>
								<form ng-submit="ctrl.logIn()">
				                    <input type="text" ng-model="ctrl.username" placeholder="username">
				                    <input type="password" ng-model="ctrl.password" placeholder="password">
				                    <input type="submit" value="LOG IN" ng-click="login={}" class="submit">
				                </form>
                            </div>
                            <div class="modal-footer">
							<button ng-click="login={}" class="close">X</button>
							</div>
                        </div>
                    </div>
								<!-- CREATE USER -->
                    <h3 ng-click="create={'display':'block'}" class="actions">SIGN UP</h3>
                    <div id="createModal" class="modal" ng-style="create">
                        <div class="modal-content">
                            <div class="modal-body">
                                <h3>SIGN UP</h3>
								<form ng-submit="ctrl.createUser()">
					                <input type="text" ng-model="ctrl.newUsername" placeholder="username">
					                <input type="text" ng-model="ctrl.newPassword" placeholder="password">
					                <input type="submit" class="submit" value="SIGN UP" ng-click="create={}">
					            </form>
							</div>
                            <div class="modal-footer">
                            	<button ng-click="create={}" class="close">X</button>
                            </div>
                        </div>
					</div>
	            </div>
	            <!-- LOGOUT -->
				<div ng-show="ctrl.loggedInUsername">
                    <h3 class="greeting">HELLO, {{ctrl.loggedInUsername}}!</h3>
                    <h3 ng-click="ctrl.logOut()" class="actions">LOG OUT</h3>
				</div>
	        </nav>
	        <div class="main">
	            <div class="title">
	                <h1 class="text-focus-in">Trusty Townies</h1>
	                <!-- <img src="../images/icons8-maintenance-60.png" alt=""> -->
	            </div>
	            <div class="mainimg"></div>
	            <div class="mainboxes">
	                <div class="box1" ng-click="ctrl.changeInclude('findtownie')">
	                    <h1 ng-style="box1" ng-click="box1={'color':'white'}; box2={'color':'#72befc'}; box3={'color':'#72befc'}">FIND A <br>TOWNIE</h1>
	                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Semper risus in hendrerit gravida. Vitae elementum curabitur vitae nunc. Tempor orci dapibus ultrices in iaculis. Ornare aenean euismod elementum nisi quis eleifend quam adipiscing.</p>
	                </div>
	                <div class="box2" ng-click= "ctrl.changeInclude('addtownie')">
	                    <h1 ng-style="box2" ng-click="box2={'color':'white'}; box1={'color':'#72befc'}; box3={'color':'#72befc'}">ADD A<br>TOWNIE</h1>
	                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Aliquam purus sit amet luctus venenatis. Fringilla est ullamcorper eget nulla facilisi etiam dignissim diam. Duis at tellus at urna condimentum mattis pellentesque id nibh. Mattis aliquam faucibus purus in.</p>
	                </div>
	                <div class="box3">
	                    <h1 ng-style="box3" ng-click="box3={'color':'white'}; box1={'color':'#72befc'}; box2={'color':'#72befc'}">CREATE <br> REVIEWS</h1>
	                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Aliquam purus sit amet luctus venenatis. Fringilla est ullamcorper eget nulla facilisi etiam dignissim diam. Duis at tellus at urna condimentum mattis pellentesque id nibh. Mattis aliquam faucibus purus in.</p>
	                </div>
	            </div>
	        </div>
        <!-- AFTER LOGIN -->
		    <div id="main-townie-display" ng-show="ctrl.loggedInUsername">
	        	<!-- <div ng-hide="ctrl.isCompanySelected"> -->
					<!-- <h4>Know a Townie you Trust?</h4> -->
					<div ng-include="ctrl.includePath">

					</div>

	        <div>
		  		</div>

			</div>
        </div>
      </div>
</div>
		<div class="footer">
	        &copy; Copyright 2019 All Rights Reserved
	    </div>
<!-- Used Gooogle Tutorial, esp. on https://developers.google.com/maps/documentation/javascript/examples/directions-panel -->
	<script>
		function initMap() {
			const directionsService = new google.maps.DirectionsService;
			const directionsRenderer = new google.maps.DirectionsRenderer;
			const map = new google.maps.Map(document.getElementById('map'), {
				zoom: 7,
				center: {lat: 41.85, lng: -87.65}
			});
			directionsRenderer.setMap(map);
			directionsRenderer.setPanel(document.getElementById('right-panel'));

			const onChangeHandler = function() {
				calculateAndDisplayRoute(directionsService, directionsRenderer);
				document.getElementById("map-directions-display").style.display = "flex";
				document.getElementById('close-map-btn').addEventListener('click',() => {
					document.getElementById('map-directions-display').style.display = "none";
				})
			};
			document.getElementById("directions-btn").removeEventListener("click", initMap);
			document.getElementById('directions-btn').addEventListener('click', onChangeHandler);
			onChangeHandler();
			}

		function calculateAndDisplayRoute(directionsService, directionsRenderer) {
			directionsService.route(
				{
					origin: {query: document.getElementById('start').value},
					destination: {query: document.getElementById('end').value},
					travelMode: 'DRIVING'
				},
				function(response, status) {
					if (status === 'OK') {
						directionsRenderer.setDirections(response);
					} else {
						window.alert('Directions request failed due to ' + status);
					}
				});
		}
		document.getElementById('directions-btn').addEventListener('click', initMap);
	</script>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD-99aWDom_qs9Pfq5tS3ay3nBIa4kHyew" async defer></script>
	</body>
</html>
